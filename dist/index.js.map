{"version":3,"file":"index.js","sources":["../src/tension/index.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { useSpring, animated } from 'react-spring'\n\nconst Tension = ({ ScrolledChild, AnimatedChild }) => {\n  const ref = useRef()\n  const [elementRested, setRested] = useState(false)\n  const [props, set] = useSpring(() => ({\n    from: { transform: `translate3d(0, 0px, 0)` },\n    config: { clamp: true }\n  }))\n\n  useEffect(() => {\n    if (elementRested) return\n    const windowHeight = window.innerHeight * 0.95\n    function onScroll () {\n      const rect = ref.current.getBoundingClientRect()\n      if (rect.top < windowHeight * 1.2) {\n        if (rect.top < (windowHeight / 3) * 2) {\n          set({\n            transform: `translate3d(0, -${windowHeight - rect.top}px, 0)`,\n            delay: 10\n            // onRest: () => { setRested(true) }\n          })\n        } else {\n          set({\n            transform: `translate3d(0, -35px, 0)`\n          })\n        }\n      } else {\n        set({\n          transform: `translate3d(0, 0px, 0)`\n        })\n      }\n    }\n    window.setTimeout(onScroll, 500)\n    window.addEventListener('scroll', onScroll)\n    return () => window.removeEventListener('scroll', onScroll)\n  }, [elementRested])\n\n  return (\n    <>\n      <div\n        ref={ref}\n        style={{\n          opacity: !elementRested ? 0 : 1,\n          pointerEvents: !elementRested && 'none',\n          marginBottom: '25vh'\n        }}\n      >\n        {ScrolledChild}\n      </div>\n      {!elementRested && (\n        <animated.div\n          style={{\n            position: 'fixed',\n            zIndex: '100',\n            top: '100vh',\n            left: '0',\n            width: '100%',\n            transform: props.transform\n          }}\n        >\n          {AnimatedChild}\n        </animated.div>\n      )}\n    </>\n  )\n}\n\nexport default Tension\n"],"names":["Tension","ScrolledChild","AnimatedChild","ref","useRef","useState","elementRested","setRested","useSpring","from","transform","config","clamp","props","set","useEffect","windowHeight","window","innerHeight","onScroll","rect","current","getBoundingClientRect","top","delay","setTimeout","addEventListener","removeEventListener","React","opacity","pointerEvents","marginBottom","animated","position","zIndex","left","width"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,OAAO,GAAG,SAAVA,OAAU,OAAsC;MAAnCC,aAAmC,QAAnCA,aAAmC;MAApBC,aAAoB,QAApBA,aAAoB;MAC9CC,GAAG,GAAGC,YAAM,EAAlB;;kBACmCC,cAAQ,CAAC,KAAD,CAFS;;MAE7CC,aAF6C;MAE9BC,SAF8B;;mBAG/BC,qBAAS,CAAC;WAAO;MACpCC,IAAI,EAAE;QAAEC,SAAS;OADmB;MAEpCC,MAAM,EAAE;QAAEC,KAAK,EAAE;;KAFY;GAAD,CAHsB;;MAG7CC,KAH6C;MAGtCC,GAHsC;;EAQpDC,eAAS,CAAC,YAAM;QACVT,aAAJ,EAAmB;QACbU,YAAY,GAAGC,MAAM,CAACC,WAAP,GAAqB,IAA1C;;aACSC,QAAT,GAAqB;UACbC,IAAI,GAAGjB,GAAG,CAACkB,OAAJ,CAAYC,qBAAZ,EAAb;;UACIF,IAAI,CAACG,GAAL,GAAWP,YAAY,GAAG,GAA9B,EAAmC;YAC7BI,IAAI,CAACG,GAAL,GAAYP,YAAY,GAAG,CAAhB,GAAqB,CAApC,EAAuC;UACrCF,GAAG,CAAC;YACFJ,SAAS,4BAAqBM,YAAY,GAAGI,IAAI,CAACG,GAAzC,WADP;YAEFC,KAAK,EAAE,EAFL;;WAAD,CAAH;SADF,MAMO;UACLV,GAAG,CAAC;YACFJ,SAAS;WADR,CAAH;;OARJ,MAYO;QACLI,GAAG,CAAC;UACFJ,SAAS;SADR,CAAH;;;;IAKJO,MAAM,CAACQ,UAAP,CAAkBN,QAAlB,EAA4B,GAA5B;IACAF,MAAM,CAACS,gBAAP,CAAwB,QAAxB,EAAkCP,QAAlC;WACO;aAAMF,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCR,QAArC,CAAN;KAAP;GAzBO,EA0BN,CAACb,aAAD,CA1BM,CAAT;SA6BEsB,4DACEA;IACE,GAAG,EAAEzB,GADP;IAEE,KAAK,EAAE;MACL0B,OAAO,EAAE,CAACvB,aAAD,GAAiB,CAAjB,GAAqB,CADzB;MAELwB,aAAa,EAAE,CAACxB,aAAD,IAAkB,MAF5B;MAGLyB,YAAY,EAAE;;KAGf9B,aARH,CADF,EAWG,CAACK,aAAD,IACCsB,6BAACI,oBAAD,CAAU,GAAV;IACE,KAAK,EAAE;MACLC,QAAQ,EAAE,OADL;MAELC,MAAM,EAAE,KAFH;MAGLX,GAAG,EAAE,OAHA;MAILY,IAAI,EAAE,GAJD;MAKLC,KAAK,EAAE,MALF;MAML1B,SAAS,EAAEG,KAAK,CAACH;;KAGlBR,aAVH,CAZJ,CADF;CApCF;;;;"}