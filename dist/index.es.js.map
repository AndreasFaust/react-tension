{"version":3,"file":"index.es.js","sources":["../src/tension/index.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { useSpring, animated } from 'react-spring'\n\nconst Tension = ({ ScrolledChild, AnimatedChild, release, middleState = 'translate3d(0, -35px, 0)' }) => {\n  const ref = useRef()\n  const [elementRested, setRested] = useState(false)\n  const [props, set] = useSpring(() => ({\n    from: { transform: `translate3d(0, 0px, 0)` },\n    config: { clamp: true }\n  }))\n\n  useEffect(() => {\n    if (release)Â {\n      const windowHeight = window.innerHeight * 0.95\n      const rect = ref.current.getBoundingClientRect()\n      set({\n        transform: `translate3d(0, -${windowHeight - rect.top}px, 0)`,\n        delay: 10\n      })\n    }\n  }, [release])\n\n  useEffect(() => {\n    if (elementRested) return\n    const windowHeight = window.innerHeight * 0.95\n    function onScroll () {\n      if (release) return\n      const rect = ref.current.getBoundingClientRect()\n      if (rect.top < windowHeight * 1.2) {\n        if (rect.top < (windowHeight / 3) * 2) {\n          set({\n            transform: `translate3d(0, -${windowHeight - rect.top}px, 0)`,\n            delay: 10\n            // onRest: () => { setRested(true) }\n          })\n        } else {\n          set({\n            // transform:\n            transform: middleState\n          })\n        }\n      } else {\n        set({\n          transform: `translate3d(0, 0px, 0)`\n        })\n      }\n    }\n    window.setTimeout(onScroll, 500)\n    window.addEventListener('scroll', onScroll)\n    return () => window.removeEventListener('scroll', onScroll)\n  }, [elementRested, release])\n\n  return (\n    <>\n      <div\n        ref={ref}\n        style={{\n          opacity: !elementRested ? 0 : 1,\n          pointerEvents: !elementRested && 'none',\n          marginBottom: '25vh'\n        }}\n      >\n        {ScrolledChild}\n      </div>\n      {!elementRested && (\n        <animated.div\n          style={{\n            position: 'fixed',\n            zIndex: '100',\n            top: '100vh',\n            left: '0',\n            width: '100%',\n            transform: props.transform\n          }}\n        >\n          {AnimatedChild}\n        </animated.div>\n      )}\n    </>\n  )\n}\n\nexport default Tension\n"],"names":["Tension","ScrolledChild","AnimatedChild","release","middleState","ref","useRef","useState","elementRested","setRested","useSpring","from","transform","config","clamp","props","set","useEffect","windowHeight","window","innerHeight","rect","current","getBoundingClientRect","top","delay","onScroll","setTimeout","addEventListener","removeEventListener","opacity","pointerEvents","marginBottom","position","zIndex","left","width"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,OAAO,GAAG,SAAVA,OAAU,OAAyF;MAAtFC,aAAsF,QAAtFA,aAAsF;MAAvEC,aAAuE,QAAvEA,aAAuE;MAAxDC,OAAwD,QAAxDA,OAAwD;8BAA/CC,WAA+C;MAA/CA,WAA+C,iCAAjC,0BAAiC;MACjGC,GAAG,GAAGC,MAAM,EAAlB;;kBACmCC,QAAQ,CAAC,KAAD,CAF4D;;MAEhGC,aAFgG;MAEjFC,SAFiF;;mBAGlFC,SAAS,CAAC;WAAO;MACpCC,IAAI,EAAE;QAAEC,SAAS;OADmB;MAEpCC,MAAM,EAAE;QAAEC,KAAK,EAAE;;KAFY;GAAD,CAHyE;;MAGhGC,KAHgG;MAGzFC,GAHyF;;EAQvGC,SAAS,CAAC,YAAM;QACVd,OAAJ,EAAa;UACLe,YAAY,GAAGC,MAAM,CAACC,WAAP,GAAqB,IAA1C;UACMC,IAAI,GAAGhB,GAAG,CAACiB,OAAJ,CAAYC,qBAAZ,EAAb;MACAP,GAAG,CAAC;QACFJ,SAAS,4BAAqBM,YAAY,GAAGG,IAAI,CAACG,GAAzC,WADP;QAEFC,KAAK,EAAE;OAFN,CAAH;;GAJK,EASN,CAACtB,OAAD,CATM,CAAT;EAWAc,SAAS,CAAC,YAAM;QACVT,aAAJ,EAAmB;QACbU,YAAY,GAAGC,MAAM,CAACC,WAAP,GAAqB,IAA1C;;aACSM,QAAT,GAAqB;UACfvB,OAAJ,EAAa;UACPkB,IAAI,GAAGhB,GAAG,CAACiB,OAAJ,CAAYC,qBAAZ,EAAb;;UACIF,IAAI,CAACG,GAAL,GAAWN,YAAY,GAAG,GAA9B,EAAmC;YAC7BG,IAAI,CAACG,GAAL,GAAYN,YAAY,GAAG,CAAhB,GAAqB,CAApC,EAAuC;UACrCF,GAAG,CAAC;YACFJ,SAAS,4BAAqBM,YAAY,GAAGG,IAAI,CAACG,GAAzC,WADP;YAEFC,KAAK,EAAE,EAFL;;WAAD,CAAH;SADF,MAMO;UACLT,GAAG,CAAC;;YAEFJ,SAAS,EAAER;WAFV,CAAH;;OARJ,MAaO;QACLY,GAAG,CAAC;UACFJ,SAAS;SADR,CAAH;;;;IAKJO,MAAM,CAACQ,UAAP,CAAkBD,QAAlB,EAA4B,GAA5B;IACAP,MAAM,CAACS,gBAAP,CAAwB,QAAxB,EAAkCF,QAAlC;WACO;aAAMP,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCH,QAArC,CAAN;KAAP;GA3BO,EA4BN,CAAClB,aAAD,EAAgBL,OAAhB,CA5BM,CAAT;SA+BE,0CACE;IACE,GAAG,EAAEE,GADP;IAEE,KAAK,EAAE;MACLyB,OAAO,EAAE,CAACtB,aAAD,GAAiB,CAAjB,GAAqB,CADzB;MAELuB,aAAa,EAAE,CAACvB,aAAD,IAAkB,MAF5B;MAGLwB,YAAY,EAAE;;KAGf/B,aARH,CADF,EAWG,CAACO,aAAD,IACC,oBAAC,QAAD,CAAU,GAAV;IACE,KAAK,EAAE;MACLyB,QAAQ,EAAE,OADL;MAELC,MAAM,EAAE,KAFH;MAGLV,GAAG,EAAE,OAHA;MAILW,IAAI,EAAE,GAJD;MAKLC,KAAK,EAAE,MALF;MAMLxB,SAAS,EAAEG,KAAK,CAACH;;KAGlBV,aAVH,CAZJ,CADF;CAjDF;;;;"}